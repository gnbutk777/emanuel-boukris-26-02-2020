(this["webpackJsonpreact-herolo"]=this["webpackJsonpreact-herolo"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=(a(92),a(13)),i=a(60),s=a(28),u=a(51),m=a(17),f=a.n(m),y=a(25),v=a(85),d=a(26),b=a(34),E=a(84),h=r.a.createContext(null),p=a(42),j="https://dataservice.accuweather.com",O="o0dtCPGayAGc3EGwXK9FlWtNRH24AQ2f",g=j,x=O,w={getCities:function(e,t){var a=t.signal;return fetch("".concat(g).concat("/locations/v1/cities/autocomplete","?apikey=").concat(x,"&q=").concat(e),{signal:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw new Error(e)}))}},C=j,k=O,F="".concat(C,"/currentconditions/v1/"),T="".concat(C,"/forecasts/v1/daily/5day/"),N={getFiveDaysForecasts:function(e,t){var a=t.signal;return fetch("".concat(T).concat(e,"?apikey=").concat(k,"&metric=true"),{signal:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw new Error(e)}))},getCurrConditions:function(e,t){var a=t.signal;return fetch("".concat(F).concat(e,"?apikey=").concat(k),{signal:a}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw new Error(e)}))}},S=Object(p.a)({},w,{},N),M=function(e){var t=e.onSelectCity,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),m=u[0],p=u[1],j=function(e,t){var a=Object(n.useState)(e),r=Object(l.a)(a,2),c=r[0],o=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){o(e)}),t);return function(){clearTimeout(a)}}),[e,t]),c}(m,250),O=Object(n.useContext)(h).setModalData,g=function(){var e=Object(y.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getCities(t,{signal:a});case 3:n=e.sent,r=n.map((function(e){return{name:e.LocalizedName,key:e.Key}})),i(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"AbortError"===e.t0.name?console.log("Fetch aborted"):O(!0,"error",e.t0.message);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return j?g(j,t):i([]),function(){e.abort()}}),[j]),r.a.createElement(d.a,{className:"justify-content-center"},r.a.createElement(v.a.Group,{as:b.a,xs:"10",md:"5"},r.a.createElement(E.a,{options:o,labelKey:function(e){return"".concat(e.name)},id:"TypeaheadCity",onInputChange:p,onChange:t,placeholder:"Search city"})))},D=a(19),K=a(35),A=function(e){var t=e.selectedCity,a=Object(n.useState)(0),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(!0),u=Object(l.a)(s,2),m=u[0],v=u[1],d=Object(n.useContext)(h).setModalData,E=t.name,p=t.key,j=function(){var e=Object(y.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getCurrConditions(t,a);case 3:n=e.sent,r=n[0].Temperature,c=r.Metric,i(c.Value),v(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"AbortError"===e.t0.name?console.log("Fetch aborted"):d(!0,"error",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return v(!0),j(p,t),function(){e.abort()}}),[p]),r.a.createElement(b.a,{className:"d-flex justify-content-center justify-content-sm-start m-2"},r.a.createElement(D.a,{style:{width:"10rem"}},r.a.createElement(D.a.Body,{className:"text-center"},r.a.createElement(D.a.Title,null,E),m?r.a.createElement(K.a,{animation:"border",size:"sm"}):r.a.createElement(D.a.Text,null,Math.round(o),"\u02daC"))))},z=a(126),B=a(127),H=a(68),V=function(e){var t=e.isFill;return r.a.createElement(b.a,{className:"align-self-center justify-content-center"},t?r.a.createElement(H.b,{size:"3em"}):r.a.createElement(H.a,{size:"3em"}))},R=a(31),G="ADD_TO_FAVORITES",I="REMOVE_FROM_FAVORITES",L="Add To Favorites",W="Remove From Favorites",_={addCityToFavorites:function(e){return{type:G,payload:e}},removeCityFormFavorites:function(e){return{type:I,payload:e}}},J=Object(R.b)((function(e){return{favorites:e.favorites}}),_)((function(e){var t=e.cityKey,a=e.cityName,n=e.addCityToFavorites,c=e.removeCityFormFavorites,o=Object(R.c)((function(e){return e.favorites.some((function(e){return e.cityKey===t}))}));return r.a.createElement(b.a,{className:"d-flex align-items-start justify-content-center justify-content-sm-end"},r.a.createElement(z.a,null,r.a.createElement(V,{isFill:o}),r.a.createElement(B.a,{onClick:function(){o?c(t):n({cityKey:t,cityName:a})},variant:"primary"},o?W:L)))})),P=function(e){var t=e.day,a=e.temperature,n=e.isLoading;return r.a.createElement(D.a,{style:{width:"11rem"},className:"m-1 m-xl-2"},n?r.a.createElement(K.a,{animation:"border",size:"xl",className:"align-self-center m-4"}):r.a.createElement(D.a.Body,{className:"text-center"},r.a.createElement(D.a.Title,null,t),r.a.createElement(D.a.Text,null,Math.round(a),"\u02daC")))},q=function(e){var t=e.selectedCityKey,a=Object(n.useState)((function(){return new Array(5).fill({})})),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(n.useState)(!0),u=Object(l.a)(s,2),m=u[0],v=u[1],b=Object(n.useContext)(h).setModalData,E=function(){var e=Object(y.a)(f.a.mark((function e(t,a){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getFiveDaysForecasts(t,a);case 3:n=e.sent,r=n.DailyForecasts.map((function(e){return{day:new Date(e.Date).toString().slice(0,3),temperature:(e.Temperature.Minimum.Value+e.Temperature.Maximum.Value)/2}})),i(r),v(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"AbortError"===e.t0.name?console.log("Fetch aborted"):b(!0,"error",e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new AbortController,a=e.signal;return v(!0),E(t,a),function(){e.abort()}}),[t]),r.a.createElement(d.a,{className:"flex-column flex-sm-row align-self-center justify-content-center m-4"},o.map((function(e,a){var n=e.day,c=e.temperature,o=t+a;return r.a.createElement(P,{key:o,isLoading:m,day:n,temperature:c})})))},Q=function(e){var t=e.selectedCity;return r.a.createElement(u.a,null,r.a.createElement(D.a,null,r.a.createElement(d.a,{className:"flex-column-reverse flex-sm-row m-2"},r.a.createElement(A,{selectedCity:t}),r.a.createElement(J,{cityKey:t.key,cityName:t.name})),r.a.createElement(q,{selectedCityKey:t.key})))},X={name:"tel-aviv",key:"215854"},Y=function(e){var t=Object(n.useState)(X),a=Object(l.a)(t,2),c=a[0],o=a[1];return r.a.createElement(u.a,null,r.a.createElement(M,{onSelectCity:function(e){e.length>0&&o(e[0])}}),c?r.a.createElement(Q,{selectedCity:c}):null)},$=function(e){var t=e.cityKey,a=e.cityName,c=Object(n.useState)({}),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(!0),m=Object(l.a)(u,2),v=m[0],d=m[1],b=Object(n.useContext)(h).setModalData,E=function(){var e=Object(y.a)(f.a.mark((function e(t,a){var n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getCurrConditions(t,a);case 3:n=e.sent,r=n[0].Temperature.Metric.Value,c=n[0].WeatherText,s({temperature:r,weatherText:c}),d(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),"AbortError"===e.t0.name?console.log("Fetch aborted"):b(!0,"error",e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=new AbortController,a=e.signal;return d(!0),E(t,a),function(){e.abort()}}),[t]),r.a.createElement(D.a.Body,{className:"text-center"},r.a.createElement(D.a.Title,null,a),v?r.a.createElement(K.a,{animation:"border",size:"xl",className:"align-self-center m-4"}):r.a.createElement(D.a,null,r.a.createElement(D.a.Text,null,Math.round(i.temperature),"\u02daC"),r.a.createElement(D.a.Text,null,i.weatherText)))},U=Object(R.b)((function(e){return{favorites:e.favorites}}),null)((function(e){var t=e.favorites;return r.a.createElement(d.a,{className:"flex-column flex-sm-row align-self-center justify-content-center m-4"},0===t.length?"You don't have any favorites yet":t.map((function(e){var t=e.cityKey,a=e.cityName;return r.a.createElement($,{key:t,cityKey:t,cityName:a})})))})),Z="/",ee="/favorites",te=function(e){var t=e.Header,a=e.Footer;return r.a.createElement(i.a,null,t,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:ee},r.a.createElement(U,null)),r.a.createElement(s.a,{path:Z},r.a.createElement(Y,null))),a)},ae=a(86),ne=a(67),re=[{name:"Home",eventKey:Z,isDisable:!1},{name:"Favorites",eventKey:ee,isDisable:!1}],ce=function(){var e=Object(s.f)();return r.a.createElement(ae.a,{className:"justify-content-between"},r.a.createElement("h5",null,"Herolo weather task"),r.a.createElement(ne.a,{defaultActiveKey:"/",fill:!0,variant:"tabs",className:"mr-sm-2",onSelect:function(t){e.push(t)}},re.map((function(e){var t=e.eventKey,a=e.name;return r.a.createElement(ne.a.Link,{key:t,eventKey:t},a)}))))},oe=a(43),le=function(e){var t=e.modalData,a=e.setModalData,n=t.isShowModal,c=t.title,o=t.text;return r.a.createElement(oe.a,{size:"sm",show:n,onHide:function(){return a({isShowModal:!1})},"aria-labelledby":"example-modal-sizes-title-sm"},r.a.createElement(oe.a.Header,{closeButton:!0},r.a.createElement(oe.a.Title,{id:"example-modal-sizes-title-sm"},c)),r.a.createElement(oe.a.Body,null,o))},ie=a(49),se={favorites:[]},ue=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case G:return(e=t.favorites.slice()).push(a.payload),Object(p.a)({},t,{favorites:e});case I:return e=t.favorites.filter((function(e){return e.cityKey!==a.payload})),Object(p.a)({},t,{favorites:e});default:return t}},me=Object(ie.b)(ue);a(121),a(122);var fe=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement(R.a,{store:me},r.a.createElement(h.Provider,{value:{setModalData:function(e,t,a){return c({isShowModal:e,title:t,text:a})}}},r.a.createElement(te,{Header:r.a.createElement(ce,null)}),r.a.createElement(le,{setModalData:c,modalData:a})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,a){e.exports=a(123)},92:function(e,t,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.7d33e6ee.chunk.js.map